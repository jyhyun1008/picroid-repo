{"file":"CodeTree-tNujjQcM.js","mappings":"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","names":["_useSlots","items","_push","_parent","_ssrRenderClass","_scopeId","_unref","_ssrInterpolate","_createVNode","_createBlock","UIcon","UCodeIcon","_toDisplayString","_openBlock","_Fragment","_renderList","$attrs","_ssrRenderVNode","_resolveDynamicComponent"],"sources":["../../../../../../../virtual:nuxt:%2FUsers%2Fjay%2FDocuments%2FGitHub%2Fcommission%2Fnode_modules%2F.cache%2Fnuxt%2F.nuxt%2Fui%2Fprose%2Fcode-tree.ts","../../../../../../@nuxt/ui/dist/runtime/components/prose/CodeTree.vue"],"sourcesContent":["export default {\n  \"slots\": {\n    \"root\": \"relative lg:h-[450px] my-5 grid lg:grid-cols-3 border border-muted rounded-md\",\n    \"list\": \"isolate relative p-2 border-b lg:border-b-0 lg:border-e border-muted overflow-y-auto\",\n    \"item\": \"\",\n    \"listWithChildren\": \"ms-4.5 border-s border-default\",\n    \"itemWithChildren\": \"ps-1.5 -ms-px\",\n    \"link\": \"relative group peer w-full px-2.5 py-1.5 before:inset-y-px before:inset-x-0 flex items-center gap-1.5 text-sm before:absolute before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2\",\n    \"linkLeadingIcon\": \"size-4 shrink-0\",\n    \"linkLabel\": \"truncate\",\n    \"linkTrailing\": \"ms-auto inline-flex gap-1.5 items-center\",\n    \"linkTrailingIcon\": \"size-5 transform transition-transform duration-200 shrink-0 group-data-expanded:rotate-180\",\n    \"content\": \"overflow-hidden lg:col-span-2 flex flex-col [&>div]:my-0 [&>div]:flex-1 [&>div]:flex [&>div]:flex-col [&>div>div]:border-0 [&>div>pre]:border-b-0 [&>div>pre]:border-s-0 [&>div>pre]:border-e-0 [&>div>pre]:rounded-l-none [&>div>pre]:flex-1 [&>div]:overflow-y-auto\"\n  },\n  \"variants\": {\n    \"active\": {\n      \"true\": {\n        \"link\": \"text-highlighted before:bg-elevated\"\n      },\n      \"false\": {\n        \"link\": [\n          \"hover:text-highlighted hover:before:bg-elevated/50\",\n          \"transition-colors before:transition-colors\"\n        ]\n      }\n    }\n  }\n}","<script>\nimport theme from \"#build/ui/prose/code-tree\";\n</script>\n\n<script setup>\nimport { computed, ref, watch, onBeforeUpdate } from \"vue\";\nimport { TreeRoot, TreeItem } from \"reka-ui\";\nimport { createReusableTemplate } from \"@vueuse/core\";\nimport { useAppConfig } from \"#imports\";\nimport { tv } from \"../../utils/tv\";\nimport UCodeIcon from \"./CodeIcon.vue\";\nimport UIcon from \"../Icon.vue\";\ndefineOptions({ inheritAttrs: false });\nconst props = defineProps({\n  defaultValue: { type: String, required: false },\n  expandAll: { type: Boolean, required: false },\n  class: { type: null, required: false },\n  ui: { type: null, required: false }\n});\nconst slots = defineSlots();\nconst appConfig = useAppConfig();\nconst [DefineTreeTemplate, ReuseTreeTemplate] = createReusableTemplate();\nconst ui = computed(() => tv({ extend: tv(theme), ...appConfig.ui?.prose?.codeTree || {} })());\nconst model = ref(props.defaultValue ? { path: props.defaultValue } : void 0);\nconst lastSelectedItem = ref();\nconst rerenderCount = ref(1);\nconst flatItems = computed(() => {\n  rerenderCount.value;\n  return slots.default?.()?.flatMap(transformSlot).filter(Boolean) || [];\n});\nconst items = computed(() => buildTree(flatItems.value));\nfunction buildTree(items2) {\n  const map = /* @__PURE__ */ new Map();\n  const root = [];\n  items2.forEach((item) => {\n    const parts = item.label.split(\"/\");\n    let path = \"\";\n    parts.forEach((part, i) => {\n      path = path ? `${path}/${part}` : part;\n      if (!map.has(path)) {\n        const node = { label: part, path, ...i < parts.length - 1 && { children: [] } };\n        map.set(path, node);\n        if (i === 0) {\n          root.push(node);\n        } else {\n          map.get(parts.slice(0, i).join(\"/\"))?.children?.push(node);\n        }\n      }\n    });\n  });\n  const sort = (nodes) => nodes.sort(\n    (a, b) => !!a.children === !!b.children ? a.label.localeCompare(b.label) : b.children ? 1 : -1\n  ).map((n) => ({ ...n, children: n.children && sort(n.children) }));\n  return sort(root);\n}\nfunction transformSlot(slot, index) {\n  if (typeof slot.type === \"symbol\") {\n    return slot.children?.map(transformSlot);\n  }\n  return {\n    label: slot.props?.filename || slot.props?.label || `${index}`,\n    icon: slot.props?.icon,\n    component: slot\n  };\n}\nconst expanded = computed(() => {\n  if (props.expandAll) {\n    const allPaths = /* @__PURE__ */ new Set();\n    flatItems.value.forEach((item) => {\n      const parts2 = item.label.split(\"/\");\n      for (let i = 1; i < parts2.length; i++) {\n        allPaths.add(parts2.slice(0, i).join(\"/\"));\n      }\n    });\n    return Array.from(allPaths);\n  }\n  const path = model.value?.path;\n  if (!path) {\n    return [];\n  }\n  const parts = path.split(\"/\");\n  return parts.map((_, index) => parts.slice(0, index + 1).join(\"/\"));\n});\nwatch(model, (value) => {\n  const item = flatItems.value.find((item2) => value?.path === item2.label);\n  if (item?.component) {\n    lastSelectedItem.value = item;\n  }\n}, { immediate: true });\nonBeforeUpdate(() => rerenderCount.value++);\n</script>\n\n<template>\n  <DefineTreeTemplate v-slot=\"{ items, level }\">\n    <li\n      v-for=\"(item, index) in items\"\n      :key=\"`${level}-${index}`\"\n      role=\"presentation\"\n      :class=\"level > 1 ? ui.itemWithChildren({ class: props.ui?.itemWithChildren }) : ui.item({ class: props.ui?.item })\"\n    >\n      <TreeItem\n        v-slot=\"{ isExpanded, isSelected }\"\n        :level=\"level\"\n        :value=\"item\"\n        as-child\n      >\n        <button\n          type=\"button\"\n          :class=\"ui.link({ class: props.ui?.link, active: isSelected })\"\n        >\n          <UIcon\n            v-if=\"item.children?.length\"\n            :name=\"isExpanded ? appConfig.ui.icons.folderOpen : appConfig.ui.icons.folder\"\n            :class=\"ui.linkLeadingIcon({ class: props.ui?.linkLeadingIcon })\"\n          />\n          <UCodeIcon\n            v-else\n            :filename=\"item.label\"\n            :class=\"ui.linkLeadingIcon({ class: props.ui?.linkLeadingIcon })\"\n          />\n\n          <span :class=\"ui.linkLabel({ class: props.ui?.linkLabel })\">\n            {{ item.label }}\n          </span>\n\n          <span v-if=\"item.children?.length\" :class=\"ui.linkTrailing({ class: props.ui?.linkTrailing })\">\n            <UIcon\n              :name=\"appConfig.ui.icons.chevronDown\"\n              :class=\"ui.linkTrailingIcon({ class: props.ui?.linkTrailingIcon })\"\n            />\n          </span>\n        </button>\n\n        <ul\n          v-if=\"item.children?.length && isExpanded\"\n          role=\"group\"\n          :class=\"ui.listWithChildren({ class: props.ui?.listWithChildren })\"\n        >\n          <ReuseTreeTemplate :items=\"item.children\" :level=\"level + 1\" />\n        </ul>\n      </TreeItem>\n    </li>\n  </DefineTreeTemplate>\n\n  <div v-bind=\"$attrs\" :class=\"ui.root({ class: [props.ui?.root, props.class] })\">\n    <TreeRoot\n      v-model=\"model\"\n      :class=\"ui.list({ class: props.ui?.list })\"\n      :items=\"items\"\n      :get-key=\"(item2) => item2.path\"\n      :default-expanded=\"expanded\"\n    >\n      <ReuseTreeTemplate :items=\"items\" :level=\"1\" />\n    </TreeRoot>\n\n    <div :class=\"ui.content({ class: props.ui?.content })\">\n      <component :is=\"lastSelectedItem?.component\" />\n    </div>\n  </div>\n</template>\n"],"version":3}